    insert-fixup(T, z) {
        while (z.p.color == red) {
            if  (z.p == z.p.p.left) { // Is z's parent a left child?
                y = z.p.p.right // y is z's uncle
                if (y.color == red) { // are z's parent and uncle both red?
                    /* Case 1 */
                    z.p.color = black
                    y.color = black
                    z.p.p.color = red
                    z = z.p.p
                    /* ------ */

                } else {
                    if (z== z.p.right) {
                        /* case 2 */
                        z = z.p
                        left-rotate(T,z)
                        /* ------ */
                    }
                    /* case 3 */
                    z.p.color = black
                    z.p.p.color = red
                    right-rotate(T,z.p.p)
                    /* ------ */
                }
            // Right and left exchanged
            } else {
                y = z.p.p.left
                if (y.color == red) {
                    z.p.color = black
                    y.color = black
                    z.p.p.color = red
                    z = z.p.p
                } else {
                    if (z== z.p.left) {
                        z = z.p
                        right-rotate(T,z)
                    }
                    z.p.color = black
                    z.p.p.color = red
                    left-rotate(T,z.p.p)
            }
        }
    }
    T.root.color = black
